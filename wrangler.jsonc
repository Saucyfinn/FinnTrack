{
	"$schema": "node_modules/wrangler/config-schema.json",
	"name": "finntrack-api-worker",
	"main": "src/index.ts",
	"compatibility_date": "2025-09-27",
	/* ----------------------------------------------------------
   * D1 DATABASE (track_points table lives here)
   * ---------------------------------------------------------- */
	"d1_databases": [
		{
			"binding": "DB",
			"database_name": "finntracker-db",
			"database_id": "308ad841-219b-4e02-89f0-c326974723e6"
		}
	],
	/* ----------------------------------------------------------
   * R2 BUCKET (optimized replay files)
   * ---------------------------------------------------------- */
	"r2_buckets": [
		{
			"binding": "RACES",
			"bucket_name": "finntracker-replay"
		}
	],
	/* ----------------------------------------------------------
   * KV NAMESPACE (store joining boats, race lists, etc.)
   * ---------------------------------------------------------- */
	"kv_namespaces": [
		{
			"binding": "HISTORY",
			"id": "191134472c4e49ea8605d58ada9e21b6"
		},
		{
			"binding": "HISTORY_PREVIEW",
			"id": "04b2e8128c294fbbbb16771527021218"
		}
	],
	/* ----------------------------------------------------------
   * DURABLE OBJECTS (live boat state in memory)
   * ---------------------------------------------------------- */
	"durable_objects": {
		"bindings": [
			{
				"name": "RACE_STATE",
				"class_name": "RaceState"
			}
		]
	},
	/* ----------------------------------------------------------
   * MIGRATIONS â€” REQUIRED for Durable Objects to work
   * ---------------------------------------------------------- */
	"migrations": [
		{
			"tag": "v1",
			"new_sqlite_classes": [
				"RaceState"
			]
		}
	]
}
